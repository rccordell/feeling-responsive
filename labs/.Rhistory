?get_sentiments
??get_sentiments
library(tidytext)
?knit
library(janeaustenr)
library(tidyr)
library(tidyverse)
library(tidytext)
library(mallet)
library(plotly)
library(stringr)
library(tokenizers)
austen <- as_data_frame(austen_books ()) %>%
filter(text != "") %>%
na.omit()
book_words <- austen %>%
unnest_tokens(word, text) %>%
count(book, word, sort = TRUE)
total_words <- book_words %>%
group_by(book) %>%
summarize(total=sum(n))
book_words <- left_join(book_words, total_words)
View(book_words)
book_words %>%
mutate(rarity = n / total)
library(ggplot2)
ggplot(book_words, aes(n/total, fill = book)) +
geom_histogram(bins = 50, show.legend = FALSE) +
xlim(NA, 0.0009) +
facet_wrap(~book, ncol = 2, scales = "free_y")
book_words <- book_words %>%
anti_join(stop_words)
View(book_words)
book_words %>%
arrange(desc(n)) %>%
View()
book_words <- ungroup(book_words) %>%
mutate(., ratio = n / total) %>%
arrange(desc(ratio))
View(book_words)
plot_austen <- book_words %>%
arrange(desc(n)) %>%
mutate(word = factor(word, levels = rev(unique(word))))
ggplot(plot_austen[1:20,], aes(word, n, fill = book)) +
geom_bar(stat = "identity") +
labs(x = NULL, y = "Frequent, Significant Words in Jane Austen's Novels") +
coord_flip()
plot_austen <- plot_austen %>%
group_by(book) %>%
top_n(30)
ggplot(plot_austen, aes(word, n, fill = book)) +
geom_bar(stat = "identity", show.legend = FALSE) +
labs(x = NULL, y = "Frequent, Significant Words in Jane Austen's Novels") +
facet_wrap(~book, ncol = 2, scales = "free") +
coord_flip()
plot_austen <- plot_austen %>%
group_by(book) %>%
top_n(30)
ggplot(plot_austen, aes(word, n, fill = book)) +
geom_bar(stat = "identity", show.legend = FALSE) +
labs(x = NULL, y = "Frequent, Significant Words in Jane Austen's Novels") +
facet_wrap(~book, ncol = 2, scales = "free") +
coord_flip()
austen_words <- austen %>%
unnest_tokens(word,text)
austen_words %>% mutate(word2 = lead(word,1)) %>% head
austen_words <- austen_words %>% mutate(word2 = lead(word,1),word3=lead(word,2),word4=lead(word,3),word5=lead(word,4))
austen_words %>% filter(word3=="she") %>%
View()
book_ngrams <- austen %>%
unnest_tokens(ngram,text,token = "ngrams", n = 4) %>%
group_by(book, ngram) %>%
summarize(count = n()) %>%
arrange(desc(count))
View(book_ngrams)
book_ngrams <- book_ngrams %>%
spread(book,count,fill=0)
View(book_ngrams)
row_sub <- apply(book_ngrams[2:7], 1, function(row) all(row !=0))
shared_book_ngrams <- book_ngrams[row_sub,]
View(shared_book_ngrams)
nrcjoy <- get_sentiments("nrc") #  %>%
filter(sentiment == "joy")
View(nrcjoy)
austen_words %>%
semi_join(nrcjoy) %>%
count(word, sort = TRUE)
austen_words %>%
filter(word %in% nrcjoy$word) %>%
count(book, sort=TRUE) %>%
View()
bing <- get_sentiments("bing")
austen_sentiment <- austen_words %>%
inner_join(bing) %>%
count(book, index = as.numeric(rownames(.)) %/% 80, sentiment) %>%
spread(sentiment, n, fill = 0) %>%
mutate(sentiment = positive - negative)
ggplot(austen_sentiment, aes(index, sentiment, fill = book)) +
geom_bar(stat = "identity", show.legend = FALSE) +
facet_wrap(~book, ncol = 2, scales = "free_x")
??gutenbergr
library(tidyverse)
library(tidytext)
booklist <- gutenberg_works(languages = "en", only_text = TRUE, distinct = TRUE) %>%
filter(subject == "Detective and mystery stories")
library(gutenbergr)
booklist <- gutenberg_works(languages = "en", only_text = TRUE, distinct = TRUE) %>%
filter(subject == "Detective and mystery stories")
booklist <- gutenberg_subjects(languages = "en", only_text = TRUE, distinct = TRUE) %>%
filter(subject == "Detective and mystery stories")
booklist <- gutenberg_subjects %>%
filter(subject == "Detective and mystery stories")
View(booklist)
booklist <- gutenberg_subjects(meta_fields = "title") %>%
filter(subject == "Detective and mystery stories")
?gutenberg_subjects
booklist <- gutenberg_subjects(meta_fields = "title") %>%
filter(str_detect(subject, "Science fiction"))
booklist <- gutenberg_subjects(meta_fields = "title") %>%
filter(str_detect(subject, "Science fiction"))
booklist <- gutenberg_subjects %>%
filter(str_detect(subject, "Science fiction"))
?str_detect
library(stringr)
booklist <- gutenberg_subjects %>%
filter(str_detect(subject, "Science fiction"))
booklist <- gutenberg_subjects %>%
filter(subject == "Science fiction"))
booklist <- gutenberg_subjects %>%
filter(subject == "Science fiction")
booklist <- gutenberg_subjects %>%
filter(str_detect(subject, "Science fiction"))
View(booklist)
books <- gutenberg_download(c(booklist$gutenberg_id), meta_fields = "title") %>%
select(text, title) %>%
filter(text != "") %>%
na.omit()
booklist <- gutenberg_subjects %>%
filter(str_detect(subject, "Science fiction"))
books <- gutenberg_download(c(booklist$gutenberg_id), meta_fields = "title") %>%
select(text, title) %>%
filter(text != "") %>%
na.omit()
booklist <- gutenberg_subjects %>%
filter(str_detect(subject, "Science fiction"))
books <- gutenberg_download(c(booklist$gutenberg_id), meta_fields = "title") %>%
select(text, title) %>%
filter(text != "") %>%
na.omit()
booklist <- gutenberg_subjects %>%
filter(subject == "Science fiction")
books <- gutenberg_download(c(booklist$gutenberg_id), meta_fields = "title") %>%
select(text, title) %>%
filter(text != "") %>%
na.omit()
booklist <- gutenberg_subjects %>%
filter(subject == "Fiction")
booklist <- gutenberg_subjects %>%
filter(subject == "American fiction")
booklist <- gutenberg_subjects %>%
filter(subject == "British fiction")
booklist <- gutenberg_subjects %>%
filter(subject == "English fiction")
books <- gutenberg_download(c(booklist$gutenberg_id), meta_fields = "title") %>%
select(text, title) %>%
filter(text != "") %>%
na.omit()
library(tidyverse)
library(tidytext)
library(gutenbergr)
library(stringr)
booklist <- gutenberg_subjects %>%
filter(subject == "Science fiction")
?gutenberg_download
books <- gutenberg_download(c(booklist$gutenberg_id), meta_fields = "title", strip = TRUE) %>%
select(text, title) %>%
filter(text != "") %>%
na.omit()
?gutenberg_works
booklist <- gutenberg_works(languages = "en", only_text = TRUE) %>%
filter(subject == "Science fiction")
booklist <- gutenberg_works(subject == "Science fiction", languages = "en", only_text = TRUE)
booklist <- gutenberg_works(gutenberg_bookshelf == "Fiction", languages = "en", only_text = TRUE)
booklist <- gutenberg_works(gutenberg_bookshelf == "Science Fiction", languages = "en", only_text = TRUE)
scifi <- gutenberg_download(c(booklist$gutenberg_id), meta_fields = "title", strip = TRUE) %>%
select(text, title) %>%
filter(text != "") %>%
na.omit()
??gutenbergr
gutenberg_get_mirror()
gutenberg_get_mirror(verbose=TRUE)
